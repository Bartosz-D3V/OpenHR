<app-page-header [header]="'My details'"></app-page-header>
<section class="c-drawer">
  <md-toolbar [color]="'primary'">My details</md-toolbar>
  <md-accordion>

    <md-expansion-panel [expanded]="step === 0" (opened)="setStep(0)" hideToggle="true">
      <md-expansion-panel-header>
        <md-panel-title>
          Personal information
        </md-panel-title>
        <md-panel-description>
          <md-icon>account_circle</md-icon>
        </md-panel-description>
      </md-expansion-panel-header>
      <form class="c-form">
        <md-form-field class="c-form__element">
          <label for="my-details-first-name"></label>
          <input mdInput required="required" placeholder="First name" [formControl]="firstNameFormControl"
                 id="my-details-first-name" name="firstName" [ngModel]="subject?.firstName">
          <md-error *ngIf="firstNameFormControl.hasError('required')">
            First name is required
          </md-error>
        </md-form-field>

        <md-form-field class="c-form__element">
          <label for="my-details-middle-name"></label>
          <input mdInput placeholder="Middle name" id="my-details-middle-name"
                 name="middleName" [ngModel]="subject?.middleName">
        </md-form-field>

        <md-form-field class="c-form__element">
          <label for="my-details-last-name"></label>
          <input mdInput required="required" placeholder="Last name" [formControl]="lastNameFormControl"
                 id="my-details-last-name" name="lastName" [ngModel]="subject?.lastName">
          <md-error *ngIf="lastNameFormControl.hasError('required')">
            Last name is required
          </md-error>
        </md-form-field>

        <md-form-field class="c-form__element">
          <label for="my-details-date-of-birth"></label>
          <input mdInput [mdDatepicker]="picker" placeholder="Date of birth" [formControl]="dobFormControl"
                 id="my-details-date-of-birth" name="dateOfBirth" [ngModel]="subject?.dateOfBirth">
          <md-error *ngIf="dobFormControl.hasError('required')">
            Date of birth is required
          </md-error>
          <md-datepicker-toggle mdSuffix [for]="picker"></md-datepicker-toggle>
          <md-datepicker #picker></md-datepicker>
        </md-form-field>

        <md-form-field class="c-form__element">
          <label for="my-details-position"></label>
          <input mdInput required="required" disabled placeholder="Position" id="my-details-position"
                 name="position" [ngModel]="subject?.position">
        </md-form-field>
      </form>
      <md-action-row>
        <button md-button color="primary" (click)="nextStep()">Next</button>
      </md-action-row>
    </md-expansion-panel>

    <md-expansion-panel [expanded]="step === 1" (opened)="setStep(1)" hideToggle="true">
      <md-expansion-panel-header>
        <md-panel-title>
          Contact information
        </md-panel-title>
        <md-panel-description>
          <md-icon>phone</md-icon>
        </md-panel-description>
      </md-expansion-panel-header>
      <form class="c-form">
        <md-form-field class="c-form__element">
          <span mdPrefix>+44 (0) &nbsp;</span>
          <label for="my-details-telephone"></label>
          <input type="tel" mdInput placeholder="Telephone" [formControl]="telephoneFormControl"
                 id="my-details-telephone" name="telephone" [ngModel]="subject?.telephone">
          <md-error *ngIf="telephoneFormControl.hasError('minlength')">
            Telephone number must contains at least 7 digits
          </md-error>
          <md-error *ngIf="telephoneFormControl.hasError('maxlength')">
            Telephone number must contains maximum 11 digits
          </md-error>
          <md-error *ngIf="telephoneFormControl.hasError('required')">
            Telephone is required
          </md-error>
          <md-error *ngIf="telephoneFormControl.hasError('pattern')">
            Please enter a valid telephone
          </md-error>
          <md-icon mdSuffix>mode_edit</md-icon>
        </md-form-field>

        <md-form-field class="c-form__element">
          <label for="my-details-email"></label>
          <input type="email" mdInput placeholder="Email" [formControl]="emailFormControl" id="my-details-email"
                 name="email" [ngModel]="subject?.email">
          <md-error *ngIf="emailFormControl.hasError('pattern')">
            Please enter a valid email address
          </md-error>
          <md-error *ngIf="emailFormControl.hasError('required')">
            Email is required
          </md-error>
        </md-form-field>

        <md-form-field class="c-form__element">
          <label for="my-details-1st-line-address"></label>
          <input type="text" mdInput placeholder="First line address" id="my-details-1st-line-address"
                 name="firstLineAddress" [ngModel]="subject?.address?.firstLineAddress">
        </md-form-field>

        <md-form-field class="c-form__element">
          <label for="my-details-2nd-line-address"></label>
          <input type="text" mdInput placeholder="Second line address" id="my-details-2nd-line-address"
                 name="secondLineAddress" [ngModel]="subject?.address?.secondLineAddress">
        </md-form-field>

        <md-form-field class="c-form__element">
          <label for="my-details-3rd-line-address"></label>
          <input type="text" mdInput placeholder="Third line address" id="my-details-3rd-line-address"
                 name="thirdLineAddress" [ngModel]="subject?.address?.thirdLineAddress">
        </md-form-field>

        <md-form-field class="c-form__element">
          <label for="my-details-postcode"></label>
          <input type="text" mdInput required="required" placeholder="Postcode" [formControl]="postcodeFormControl"
                 id="my-details-postcode" name="postcode" [ngModel]="subject?.address?.postcode">
          <md-error *ngIf="postcodeFormControl.hasError('pattern')">
            Please enter a valid postcode
          </md-error>
          <md-error *ngIf="postcodeFormControl.hasError('required')">
            Postcode is required
          </md-error>
        </md-form-field>

        <md-form-field class="c-form__element">
          <label for="my-details-city"></label>
          <input type="text" mdInput placeholder="City" id="my-details-city" name="city"
                 [ngModel]="subject?.address?.city">
        </md-form-field>

        <md-form-field class="c-form__element">
          <label for="my-details-country"></label>
          <input type="text" mdInput placeholder="Country" id="my-details-country"
                 name="country" [ngModel]="subject?.address?.country">
        </md-form-field>
      </form>
      <md-action-row>
        <button md-button color="warn" (click)="prevStep()">Previous</button>
        <button md-button color="primary" (click)="nextStep()">End</button>
      </md-action-row>
    </md-expansion-panel>

  </md-accordion>
  <button type="submit" md-raised-button color="accent" [disabled]="!isValid()">Save</button>
</section>
