<?xml version='1.0' encoding='UTF-8'?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
             typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath"
             targetNamespace="http://www.activiti.org/processdef">
  <process id="delegation-application" name="Delegation application" isExecutable="true">
    <documentation>Process that describes application for a delegation.</documentation>
    <startEvent id="startEvent1"/>
    <exclusiveGateway id="sid-F12ACCA4-7BBF-46CA-8A39-172658E4D0DA" default="sid-89C688A3-EFED-4A29-80B7-6CABA557841A"/>
    <sequenceFlow id="sid-2EFC87A6-CE88-4517-BBD5-C33B2565E5BA" name="Application recorded" sourceRef="startEvent1"
                  targetRef="sid-F12ACCA4-7BBF-46CA-8A39-172658E4D0DA"/>
    <userTask id="sid-91CB29A0-5D6C-42A5-86D9-8FEDF64B71C2" name="Manager reviews application"/>
    <exclusiveGateway id="sid-19369DA4-09AD-47D0-BBBD-58B0A7D2E0EE"/>
    <sequenceFlow id="sid-C6F17683-7E86-422E-98EA-B1065E90022E" sourceRef="sid-91CB29A0-5D6C-42A5-86D9-8FEDF64B71C2"
                  targetRef="sid-19369DA4-09AD-47D0-BBBD-58B0A7D2E0EE"/>
    <serviceTask id="sid-E92E9809-CC66-4347-B468-3DF417A1E753" name="Assign back to applicant" activiti:async="false"
                 activiti:exclusive="false"
                 activiti:expression="${delegationApplicationServiceImpl.assignToApplicant(delegationApplication)}"/>
    <userTask id="sid-E3546F7B-E291-455E-9612-BBBF0C58467B" name="Amend the application"/>
    <serviceTask id="sid-160491E7-819F-45A7-9EA2-F74BC5D78B16" name="Mark as rejected by manager" activiti:async="false"
                 activiti:exclusive="false"
                 activiti:expression="${delegationApplicationServiceImpl.rejectByManager(delegationApplication)}"/>
    <userTask id="sid-059CD927-3EE6-4B07-BFEE-DC5717D272B7" name="HR reviews application"/>
    <exclusiveGateway id="sid-48306149-AFE0-4AA9-B489-D597B3583CC1"/>
    <serviceTask id="sid-DCD4857D-6464-4F83-87DD-1E9F272B8BBA" name="Mark as rejected by HR"
                 activiti:expression="${delegationApplicationServiceImpl.rejectByHr(delegationApplication)}"/>
    <serviceTask id="sid-96863DC0-B704-4F89-91F6-AB4B7EF66797" name="Mark as accepted by HR"
                 activiti:expression="${delegationApplicationServiceImpl.approveByHr(delegationApplication)}"/>
    <serviceTask id="sid-8AD46065-1864-4665-B3DC-51DAF9B28D00" name="Mark as accepted by Manager"
                 activiti:expression="${delegationApplicationServiceImpl.approveByManager(delegationApplication)}"/>
    <sequenceFlow id="sid-B91AA954-7813-4F53-BC24-A86515F1971E" sourceRef="sid-8AD46065-1864-4665-B3DC-51DAF9B28D00"
                  targetRef="sid-059CD927-3EE6-4B07-BFEE-DC5717D272B7"/>
    <endEvent id="sid-ECBF523C-16D7-45B9-B6BD-4A227782F4A8"/>
    <sequenceFlow id="sid-98F928B8-B224-413B-BC60-EE6B9CACF942" sourceRef="sid-96863DC0-B704-4F89-91F6-AB4B7EF66797"
                  targetRef="sid-ECBF523C-16D7-45B9-B6BD-4A227782F4A8"/>
    <parallelGateway id="sid-B3E21B41-9DBC-4E35-BF4A-52CE71724EA4"/>
    <sequenceFlow id="sid-83AADA5F-4AF7-4A6B-9886-C2494FBF9B52" sourceRef="sid-E92E9809-CC66-4347-B468-3DF417A1E753"
                  targetRef="sid-B3E21B41-9DBC-4E35-BF4A-52CE71724EA4"/>
    <sequenceFlow id="sid-327E5420-7FB9-40B9-87C7-F13A267F1A76" sourceRef="sid-B3E21B41-9DBC-4E35-BF4A-52CE71724EA4"
                  targetRef="sid-E3546F7B-E291-455E-9612-BBBF0C58467B"/>
    <sequenceFlow id="sid-6594F6B6-82C7-4AB9-B79F-4252E4DB1132" sourceRef="sid-059CD927-3EE6-4B07-BFEE-DC5717D272B7"
                  targetRef="sid-48306149-AFE0-4AA9-B489-D597B3583CC1"/>
    <sequenceFlow id="sid-951807B3-7068-409F-87B5-88EB3750CD2B" name="Rejected"
                  sourceRef="sid-48306149-AFE0-4AA9-B489-D597B3583CC1"
                  targetRef="sid-DCD4857D-6464-4F83-87DD-1E9F272B8BBA">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approvedByHR == false}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-32AF805F-8DB7-4774-93A9-10734D67F8F2" name="Accepted"
                  sourceRef="sid-48306149-AFE0-4AA9-B489-D597B3583CC1"
                  targetRef="sid-96863DC0-B704-4F89-91F6-AB4B7EF66797">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approvedByHR == true}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-37E0B370-851E-43AE-AA4F-89EA960A5936" sourceRef="sid-E3546F7B-E291-455E-9612-BBBF0C58467B"
                  targetRef="sid-F12ACCA4-7BBF-46CA-8A39-172658E4D0DA"/>
    <sequenceFlow id="sid-78A5ED6C-9377-4BF1-A335-4BDC81FC44F3" name="Accepted"
                  sourceRef="sid-19369DA4-09AD-47D0-BBBD-58B0A7D2E0EE"
                  targetRef="sid-8AD46065-1864-4665-B3DC-51DAF9B28D00">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approvedByManager == true}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-AE45267A-1DA9-4884-A651-A78CFA8FCF90" name="Manager"
                  sourceRef="sid-F12ACCA4-7BBF-46CA-8A39-172658E4D0DA"
                  targetRef="sid-059CD927-3EE6-4B07-BFEE-DC5717D272B7">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${subject.role == "MANAGER"}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-8D330D5E-83F9-4CD0-9345-842C6BEBF368" name="HR"
                  sourceRef="sid-F12ACCA4-7BBF-46CA-8A39-172658E4D0DA"
                  targetRef="sid-96863DC0-B704-4F89-91F6-AB4B7EF66797">
      <conditionExpression xsi:type="tFormalExpression">
        <![CDATA[${subject.role == "HRTEAMMEMBER"}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-89C688A3-EFED-4A29-80B7-6CABA557841A" name="Employee"
                  sourceRef="sid-F12ACCA4-7BBF-46CA-8A39-172658E4D0DA"
                  targetRef="sid-91CB29A0-5D6C-42A5-86D9-8FEDF64B71C2"/>
    <sequenceFlow id="sid-948F24A7-2651-488C-ACF1-53EA8C07B55D" name="Rejected"
                  sourceRef="sid-19369DA4-09AD-47D0-BBBD-58B0A7D2E0EE"
                  targetRef="sid-6B2CA68A-3FA7-4545-A771-D156217E5BAB">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approvedByManager == false}]]></conditionExpression>
    </sequenceFlow>
    <parallelGateway id="sid-6B2CA68A-3FA7-4545-A771-D156217E5BAB"/>
    <sequenceFlow id="sid-147F0309-9F64-438E-AE98-1B48C6285CAA" sourceRef="sid-160491E7-819F-45A7-9EA2-F74BC5D78B16"
                  targetRef="sid-B3E21B41-9DBC-4E35-BF4A-52CE71724EA4"/>
    <sequenceFlow id="sid-CEAC4844-4310-4CD4-9076-A19401BC3B73" sourceRef="sid-6B2CA68A-3FA7-4545-A771-D156217E5BAB"
                  targetRef="sid-E92E9809-CC66-4347-B468-3DF417A1E753"/>
    <sequenceFlow id="sid-E843BD63-D0DC-49F1-9093-8912282F2C69" sourceRef="sid-6B2CA68A-3FA7-4545-A771-D156217E5BAB"
                  targetRef="sid-160491E7-819F-45A7-9EA2-F74BC5D78B16"/>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_delegation-application">
    <bpmndi:BPMNPlane bpmnElement="delegation-application" id="BPMNPlane_delegation-application">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="15.464347534975232" y="386.30115748404677"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-F12ACCA4-7BBF-46CA-8A39-172658E4D0DA"
                        id="BPMNShape_sid-F12ACCA4-7BBF-46CA-8A39-172658E4D0DA">
        <omgdc:Bounds height="40.0" width="40.0" x="185.57217041970273" y="381.6918332572126"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-91CB29A0-5D6C-42A5-86D9-8FEDF64B71C2"
                        id="BPMNShape_sid-91CB29A0-5D6C-42A5-86D9-8FEDF64B71C2">
        <omgdc:Bounds height="80.00000000000006" width="100.00000000000011" x="401.9498402845934"
                      y="361.6918332572126"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-19369DA4-09AD-47D0-BBBD-58B0A7D2E0EE"
                        id="BPMNShape_sid-19369DA4-09AD-47D0-BBBD-58B0A7D2E0EE">
        <omgdc:Bounds height="40.0" width="40.0" x="568.4041459859936" y="381.6918332572126"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-E92E9809-CC66-4347-B468-3DF417A1E753"
                        id="BPMNShape_sid-E92E9809-CC66-4347-B468-3DF417A1E753">
        <omgdc:Bounds height="80.0" width="99.99999999999977" x="371.1443408394056" y="46.393042604925675"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-E3546F7B-E291-455E-9612-BBBF0C58467B"
                        id="BPMNShape_sid-E3546F7B-E291-455E-9612-BBBF0C58467B">
        <omgdc:Bounds height="80.0" width="99.99999999999991" x="155.57217041970284" y="216.81527322444117"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-160491E7-819F-45A7-9EA2-F74BC5D78B16"
                        id="BPMNShape_sid-160491E7-819F-45A7-9EA2-F74BC5D78B16">
        <omgdc:Bounds height="80.0" width="100.0" x="371.14434083940546" y="170.75811427589446"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-059CD927-3EE6-4B07-BFEE-DC5717D272B7"
                        id="BPMNShape_sid-059CD927-3EE6-4B07-BFEE-DC5717D272B7">
        <omgdc:Bounds height="80.00000000000011" width="100.0" x="401.94984028459345" y="619.7724731814382"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-48306149-AFE0-4AA9-B489-D597B3583CC1"
                        id="BPMNShape_sid-48306149-AFE0-4AA9-B489-D597B3583CC1">
        <omgdc:Bounds height="40.0" width="40.0" x="568.4368948979575" y="639.7724731814382"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-DCD4857D-6464-4F83-87DD-1E9F272B8BBA"
                        id="BPMNShape_sid-DCD4857D-6464-4F83-87DD-1E9F272B8BBA">
        <omgdc:Bounds height="80.0" width="100.0" x="678.8851130879043" y="185.57217041970273"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-96863DC0-B704-4F89-91F6-AB4B7EF66797"
                        id="BPMNShape_sid-96863DC0-B704-4F89-91F6-AB4B7EF66797">
        <omgdc:Bounds height="80.0" width="100.0" x="810.6146911450403" y="619.7724731814382"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-8AD46065-1864-4665-B3DC-51DAF9B28D00"
                        id="BPMNShape_sid-8AD46065-1864-4665-B3DC-51DAF9B28D00">
        <omgdc:Bounds height="80.00000000000006" width="100.0" x="401.94984028459345" y="497.38228303571276"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-ECBF523C-16D7-45B9-B6BD-4A227782F4A8"
                        id="BPMNShape_sid-ECBF523C-16D7-45B9-B6BD-4A227782F4A8">
        <omgdc:Bounds height="28.0" width="28.0" x="1014.8626042524832" y="645.7724731814382"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-B3E21B41-9DBC-4E35-BF4A-52CE71724EA4"
                        id="BPMNShape_sid-B3E21B41-9DBC-4E35-BF4A-52CE71724EA4">
        <omgdc:Bounds height="39.999999999999986" width="40.0" x="280.3198340756167" y="123.71478027980181"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-6B2CA68A-3FA7-4545-A771-D156217E5BAB"
                        id="BPMNShape_sid-6B2CA68A-3FA7-4545-A771-D156217E5BAB">
        <omgdc:Bounds height="40.0" width="40.0" x="568.4041459859936" y="190.75811427589446"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-B91AA954-7813-4F53-BC24-A86515F1971E"
                       id="BPMNEdge_sid-B91AA954-7813-4F53-BC24-A86515F1971E">
        <omgdi:waypoint x="451.94984028459345" y="577.3822830357128"/>
        <omgdi:waypoint x="451.94984028459345" y="619.7724731814382"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-CEAC4844-4310-4CD4-9076-A19401BC3B73"
                       id="BPMNEdge_sid-CEAC4844-4310-4CD4-9076-A19401BC3B73">
        <omgdi:waypoint x="588.3395664577639" y="190.82269380412413"/>
        <omgdi:waypoint x="588.0" y="86.0"/>
        <omgdi:waypoint x="471.14434083940534" y="86.27526337978492"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-8D330D5E-83F9-4CD0-9345-842C6BEBF368"
                       id="BPMNEdge_sid-8D330D5E-83F9-4CD0-9345-842C6BEBF368">
        <omgdi:waypoint x="205.5931560370706" y="421.6708476398447"/>
        <omgdi:waypoint x="206.0" y="809.0"/>
        <omgdi:waypoint x="860.0" y="809.0"/>
        <omgdi:waypoint x="860.4499249901237" y="699.7724731814382"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-32AF805F-8DB7-4774-93A9-10734D67F8F2"
                       id="BPMNEdge_sid-32AF805F-8DB7-4774-93A9-10734D67F8F2">
        <omgdi:waypoint x="588.3425987506629" y="679.6781770341436"/>
        <omgdi:waypoint x="588.0" y="752.0"/>
        <omgdi:waypoint x="769.0" y="752.0"/>
        <omgdi:waypoint x="769.0" y="659.0"/>
        <omgdi:waypoint x="810.6146911450403" y="659.3508851305571"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-2EFC87A6-CE88-4517-BBD5-C33B2565E5BA"
                       id="BPMNEdge_sid-2EFC87A6-CE88-4517-BBD5-C33B2565E5BA">
        <omgdi:waypoint x="45.46431020295386" y="401.33462327624403"/>
        <omgdi:waypoint x="185.61669225620315" y="401.6473114207122"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-C6F17683-7E86-422E-98EA-B1065E90022E"
                       id="BPMNEdge_sid-C6F17683-7E86-422E-98EA-B1065E90022E">
        <omgdi:waypoint x="501.9498402845935" y="401.6918332572126"/>
        <omgdi:waypoint x="568.4041459859936" y="401.6918332572126"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-83AADA5F-4AF7-4A6B-9886-C2494FBF9B52"
                       id="BPMNEdge_sid-83AADA5F-4AF7-4A6B-9886-C2494FBF9B52">
        <omgdi:waypoint x="371.1443408394056" y="86.23082181846455"/>
        <omgdi:waypoint x="300.0" y="86.0"/>
        <omgdi:waypoint x="300.2096122436397" y="123.82500211177884"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-37E0B370-851E-43AE-AA4F-89EA960A5936"
                       id="BPMNEdge_sid-37E0B370-851E-43AE-AA4F-89EA960A5936">
        <omgdi:waypoint x="205.57217041970276" y="296.81527322444117"/>
        <omgdi:waypoint x="205.57217041970273" y="381.6918332572126"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-98F928B8-B224-413B-BC60-EE6B9CACF942"
                       id="BPMNEdge_sid-98F928B8-B224-413B-BC60-EE6B9CACF942">
        <omgdi:waypoint x="910.6146911450403" y="659.7724731814382"/>
        <omgdi:waypoint x="1014.8626042524832" y="659.7724731814382"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-951807B3-7068-409F-87B5-88EB3750CD2B"
                       id="BPMNEdge_sid-951807B3-7068-409F-87B5-88EB3750CD2B">
        <omgdi:waypoint x="608.4043423848976" y="659.805025694498"/>
        <omgdi:waypoint x="728.0" y="660.0"/>
        <omgdi:waypoint x="728.8036161829975" y="265.57217041970273"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-147F0309-9F64-438E-AE98-1B48C6285CAA"
                       id="BPMNEdge_sid-147F0309-9F64-438E-AE98-1B48C6285CAA">
        <omgdi:waypoint x="371.14434083940546" y="210.445217168757"/>
        <omgdi:waypoint x="300.0" y="210.0"/>
        <omgdi:waypoint x="300.2237950943715" y="163.61874129855656"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-327E5420-7FB9-40B9-87C7-F13A267F1A76"
                       id="BPMNEdge_sid-327E5420-7FB9-40B9-87C7-F13A267F1A76">
        <omgdi:waypoint x="280.37950031895303" y="143.77444652313812"/>
        <omgdi:waypoint x="205.0" y="144.0"/>
        <omgdi:waypoint x="205.36930057651603" y="216.81527322444117"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-E843BD63-D0DC-49F1-9093-8912282F2C69"
                       id="BPMNEdge_sid-E843BD63-D0DC-49F1-9093-8912282F2C69">
        <omgdi:waypoint x="568.8443587586246" y="211.1983270485254"/>
        <omgdi:waypoint x="471.14434083940546" y="210.90713686195525"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-AE45267A-1DA9-4884-A651-A78CFA8FCF90"
                       id="BPMNEdge_sid-AE45267A-1DA9-4884-A651-A78CFA8FCF90">
        <omgdi:waypoint x="205.60536947504625" y="421.65863420186906"/>
        <omgdi:waypoint x="206.0" y="659.0"/>
        <omgdi:waypoint x="401.94984028459345" y="659.6154344168381"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-78A5ED6C-9377-4BF1-A335-4BDC81FC44F3"
                       id="BPMNEdge_sid-78A5ED6C-9377-4BF1-A335-4BDC81FC44F3">
        <omgdi:waypoint x="588.3445867643037" y="421.6322740355226"/>
        <omgdi:waypoint x="588.0" y="537.0"/>
        <omgdi:waypoint x="501.94984028459345" y="537.2417896189787"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-6594F6B6-82C7-4AB9-B79F-4252E4DB1132"
                       id="BPMNEdge_sid-6594F6B6-82C7-4AB9-B79F-4252E4DB1132">
        <omgdi:waypoint x="501.94984028459345" y="659.7724731814383"/>
        <omgdi:waypoint x="568.4368948979575" y="659.7724731814382"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-89C688A3-EFED-4A29-80B7-6CABA557841A"
                       id="BPMNEdge_sid-89C688A3-EFED-4A29-80B7-6CABA557841A">
        <omgdi:waypoint x="225.57217041970273" y="401.6918332572126"/>
        <omgdi:waypoint x="401.9498402845934" y="401.6918332572126"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-948F24A7-2651-488C-ACF1-53EA8C07B55D"
                       id="BPMNEdge_sid-948F24A7-2651-488C-ACF1-53EA8C07B55D">
        <omgdi:waypoint x="588.4041459859936" y="381.6918332572126"/>
        <omgdi:waypoint x="588.4041459859936" y="230.75811427589446"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
