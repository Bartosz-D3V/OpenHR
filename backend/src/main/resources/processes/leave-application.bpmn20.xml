<?xml version='1.0' encoding='UTF-8'?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:activiti="http://activiti.org/bpmn"
             xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
             xmlns:omgdc="http://www.omg.org/spec/DD/20100524/DC" xmlns:omgdi="http://www.omg.org/spec/DD/20100524/DI"
             typeLanguage="http://www.w3.org/2001/XMLSchema" expressionLanguage="http://www.w3.org/1999/XPath"
             targetNamespace="http://www.activiti.org/processdef">
  <process id="leave-application" name="leave-application" isExecutable="true">
    <documentation>Workflow for application for a leave.</documentation>
    <startEvent id="startEvent1"/>
    <exclusiveGateway id="sid-22DABFDC-033A-4B20-9F2A-8FBE66E2D79A"/>
    <userTask id="sid-5A508ADC-C959-4F82-9AB1-D5AF50E87135" name="Manager reviews the application"/>
    <serviceTask id="sid-ED493EB6-19CB-4509-A07E-1ADECA136EE5" name="Mark application as rejected by Manager"
                 activiti:expression="${leaveApplicationServiceImpl.rejectLeaveApplicationByManager(applicationId)}"/>
    <userTask id="sid-C57611C2-8D56-4653-9068-4FA5F1068DC8" name="HR reviews the application"/>
    <sequenceFlow id="sid-8DF2294F-A718-4825-8C56-C83775D8E1A3" sourceRef="sid-D2BFCAD6-FCA5-4FE5-8B63-16C30C423273"
                  targetRef="sid-C57611C2-8D56-4653-9068-4FA5F1068DC8"/>
    <exclusiveGateway id="sid-DB6ACAE2-73EC-47E9-B5C2-5084E38696C0"/>
    <sequenceFlow id="sid-589996B0-48BA-496B-86F9-576736E2B4BC" sourceRef="sid-C57611C2-8D56-4653-9068-4FA5F1068DC8"
                  targetRef="sid-DB6ACAE2-73EC-47E9-B5C2-5084E38696C0"/>
    <serviceTask id="sid-3354A1FB-D3AA-4971-BB90-446AD17C1AD6" name="Mark application as rejected by HR"
                 activiti:expression="${leaveApplicationServiceImpl.rejectLeaveApplicationByHr(applicationId)}"/>
    <serviceTask id="sid-0461F094-B896-4734-84E0-4BA3D684BB6B" name="Mark application as accepted by HR"
                 activiti:expression="${leaveApplicationServiceImpl.approveLeaveApplicationByHr(applicationId)}"/>
    <exclusiveGateway id="sid-C86A37E3-3C0E-42D9-9FBD-286F20E2D759" default="sid-F31A9A58-6527-4BA0-89C9-02948A4781C6"/>
    <sequenceFlow id="sid-F2279020-8DCE-48AE-81A1-24FA512C9909" name="Application recorded" sourceRef="startEvent1"
                  targetRef="sid-C86A37E3-3C0E-42D9-9FBD-286F20E2D759"/>
    <sequenceFlow id="sid-F31A9A58-6527-4BA0-89C9-02948A4781C6" name="Employee"
                  sourceRef="sid-C86A37E3-3C0E-42D9-9FBD-286F20E2D759"
                  targetRef="sid-5A508ADC-C959-4F82-9AB1-D5AF50E87135"/>
    <serviceTask id="sid-379A3B1C-3859-450F-A505-4F0A67A0A8FA" name="Terminate application"
                 activiti:expression="${leaveApplicationServiceImpl.terminateLeaveApplication(applicationId)}"/>
    <sequenceFlow id="sid-669E07D7-5A45-474B-A4F0-882750233458" sourceRef="sid-ED493EB6-19CB-4509-A07E-1ADECA136EE5"
                  targetRef="sid-379A3B1C-3859-450F-A505-4F0A67A0A8FA"/>
    <serviceTask id="sid-D2BFCAD6-FCA5-4FE5-8B63-16C30C423273" name="Mark application as accepted by Manager"
                 activiti:expression="${leaveApplicationServiceImpl.approveLeaveApplicationByManager(applicationId)}"/>
    <sequenceFlow id="sid-C26B4702-4693-4B44-A558-E70C2B4C91DB" sourceRef="sid-3354A1FB-D3AA-4971-BB90-446AD17C1AD6"
                  targetRef="sid-379A3B1C-3859-450F-A505-4F0A67A0A8FA"/>
    <sequenceFlow id="sid-7E9E287C-76F3-4DF5-B8CC-7A7B61B9EED9" sourceRef="sid-0461F094-B896-4734-84E0-4BA3D684BB6B"
                  targetRef="sid-379A3B1C-3859-450F-A505-4F0A67A0A8FA"/>
    <endEvent id="sid-2C539FD2-0F35-4B40-99A5-AFD472CB0FE1"/>
    <sequenceFlow id="sid-2C4EB4C1-6EA2-461A-9859-E36166C2C2B7" sourceRef="sid-379A3B1C-3859-450F-A505-4F0A67A0A8FA"
                  targetRef="sid-2C539FD2-0F35-4B40-99A5-AFD472CB0FE1"/>
    <sequenceFlow id="sid-CCCF894B-7BC0-43B3-B7FF-59401231AACA" name="HR Member"
                  sourceRef="sid-C86A37E3-3C0E-42D9-9FBD-286F20E2D759"
                  targetRef="sid-0461F094-B896-4734-84E0-4BA3D684BB6B">
      <conditionExpression xsi:type="tFormalExpression">
        <![CDATA[${subject.role == "HRTEAMMEMBER"}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-7172DFFF-DF18-45D9-9179-762AF16B2EE0" name="Manager"
                  sourceRef="sid-C86A37E3-3C0E-42D9-9FBD-286F20E2D759"
                  targetRef="sid-D2BFCAD6-FCA5-4FE5-8B63-16C30C423273">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${subject.role == "MANAGER"}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-D4861E45-774A-434E-B6A6-F86F9BDCB538" sourceRef="sid-5A508ADC-C959-4F82-9AB1-D5AF50E87135"
                  targetRef="sid-22DABFDC-033A-4B20-9F2A-8FBE66E2D79A"/>
    <sequenceFlow id="sid-8628F8A5-628A-4189-AD00-81856C7121D7" name="Rejected"
                  sourceRef="sid-22DABFDC-033A-4B20-9F2A-8FBE66E2D79A"
                  targetRef="sid-ED493EB6-19CB-4509-A07E-1ADECA136EE5">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approvedByManager == false}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-5DD24A07-7E39-4E03-B86D-D129887AC1C7" name="Accepted"
                  sourceRef="sid-22DABFDC-033A-4B20-9F2A-8FBE66E2D79A"
                  targetRef="sid-D2BFCAD6-FCA5-4FE5-8B63-16C30C423273">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approvedByManager == true}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-D08CA74F-84EE-4FF2-9CB4-421C5C15850F" name="Rejected"
                  sourceRef="sid-DB6ACAE2-73EC-47E9-B5C2-5084E38696C0"
                  targetRef="sid-3354A1FB-D3AA-4971-BB90-446AD17C1AD6">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approvedByHR == false}]]></conditionExpression>
    </sequenceFlow>
    <sequenceFlow id="sid-C2BA8912-A157-4DA6-9877-643CDFABB001" name="Accepted"
                  sourceRef="sid-DB6ACAE2-73EC-47E9-B5C2-5084E38696C0"
                  targetRef="sid-0461F094-B896-4734-84E0-4BA3D684BB6B">
      <conditionExpression xsi:type="tFormalExpression"><![CDATA[${approvedByHR == true}]]></conditionExpression>
    </sequenceFlow>
  </process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_leave-application">
    <bpmndi:BPMNPlane bpmnElement="leave-application" id="BPMNPlane_leave-application">
      <bpmndi:BPMNShape bpmnElement="startEvent1" id="BPMNShape_startEvent1">
        <omgdc:Bounds height="30.0" width="30.0" x="18.518518188062956" y="221.55555492181674"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-22DABFDC-033A-4B20-9F2A-8FBE66E2D79A"
                        id="BPMNShape_sid-22DABFDC-033A-4B20-9F2A-8FBE66E2D79A">
        <omgdc:Bounds height="39.99999999999997" width="40.0" x="465.0" y="216.5555549218167"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-5A508ADC-C959-4F82-9AB1-D5AF50E87135"
                        id="BPMNShape_sid-5A508ADC-C959-4F82-9AB1-D5AF50E87135">
        <omgdc:Bounds height="80.0" width="99.99999999999994" x="315.0" y="196.5555494083872"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-ED493EB6-19CB-4509-A07E-1ADECA136EE5"
                        id="BPMNShape_sid-ED493EB6-19CB-4509-A07E-1ADECA136EE5">
        <omgdc:Bounds height="80.0" width="100.0" x="435.0" y="0.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-C57611C2-8D56-4653-9068-4FA5F1068DC8"
                        id="BPMNShape_sid-C57611C2-8D56-4653-9068-4FA5F1068DC8">
        <omgdc:Bounds height="80.0" width="100.0" x="720.0" y="196.55555492181674"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-DB6ACAE2-73EC-47E9-B5C2-5084E38696C0"
                        id="BPMNShape_sid-DB6ACAE2-73EC-47E9-B5C2-5084E38696C0">
        <omgdc:Bounds height="40.0" width="40.0" x="855.0" y="216.55555492181674"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-3354A1FB-D3AA-4971-BB90-446AD17C1AD6"
                        id="BPMNShape_sid-3354A1FB-D3AA-4971-BB90-446AD17C1AD6">
        <omgdc:Bounds height="80.0" width="100.0" x="825.0" y="60.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-0461F094-B896-4734-84E0-4BA3D684BB6B"
                        id="BPMNShape_sid-0461F094-B896-4734-84E0-4BA3D684BB6B">
        <omgdc:Bounds height="80.0" width="100.0" x="825.0" y="330.0"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-C86A37E3-3C0E-42D9-9FBD-286F20E2D759"
                        id="BPMNShape_sid-C86A37E3-3C0E-42D9-9FBD-286F20E2D759">
        <omgdc:Bounds height="40.0" width="40.0" x="187.7777728209444" y="216.5555494083872"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-379A3B1C-3859-450F-A505-4F0A67A0A8FA"
                        id="BPMNShape_sid-379A3B1C-3859-450F-A505-4F0A67A0A8FA">
        <omgdc:Bounds height="80.0" width="100.0" x="960.0" y="196.55555492181674"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-D2BFCAD6-FCA5-4FE5-8B63-16C30C423273"
                        id="BPMNShape_sid-D2BFCAD6-FCA5-4FE5-8B63-16C30C423273">
        <omgdc:Bounds height="80.0" width="100.0" x="570.0" y="196.55555492181674"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="sid-2C539FD2-0F35-4B40-99A5-AFD472CB0FE1"
                        id="BPMNShape_sid-2C539FD2-0F35-4B40-99A5-AFD472CB0FE1">
        <omgdc:Bounds height="28.0" width="28.0" x="1110.0" y="222.55555492181674"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge bpmnElement="sid-669E07D7-5A45-474B-A4F0-882750233458"
                       id="BPMNEdge_sid-669E07D7-5A45-474B-A4F0-882750233458">
        <omgdi:waypoint x="535.0" y="40.0"/>
        <omgdi:waypoint x="1010.0" y="40.0"/>
        <omgdi:waypoint x="1010.0" y="196.55555492181674"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-CCCF894B-7BC0-43B3-B7FF-59401231AACA"
                       id="BPMNEdge_sid-CCCF894B-7BC0-43B3-B7FF-59401231AACA">
        <omgdi:waypoint x="207.8110237676668" y="256.52229846166483"/>
        <omgdi:waypoint x="208.0" y="370.0"/>
        <omgdi:waypoint x="825.0" y="370.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-8DF2294F-A718-4825-8C56-C83775D8E1A3"
                       id="BPMNEdge_sid-8DF2294F-A718-4825-8C56-C83775D8E1A3">
        <omgdi:waypoint x="670.0" y="236.55555492181674"/>
        <omgdi:waypoint x="720.0" y="236.55555492181674"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-C2BA8912-A157-4DA6-9877-643CDFABB001"
                       id="BPMNEdge_sid-C2BA8912-A157-4DA6-9877-643CDFABB001">
        <omgdi:waypoint x="875.0" y="256.55555492181674"/>
        <omgdi:waypoint x="875.0" y="330.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-D08CA74F-84EE-4FF2-9CB4-421C5C15850F"
                       id="BPMNEdge_sid-D08CA74F-84EE-4FF2-9CB4-421C5C15850F">
        <omgdi:waypoint x="875.0" y="216.55555492181674"/>
        <omgdi:waypoint x="875.0" y="140.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-2C4EB4C1-6EA2-461A-9859-E36166C2C2B7"
                       id="BPMNEdge_sid-2C4EB4C1-6EA2-461A-9859-E36166C2C2B7">
        <omgdi:waypoint x="1060.0" y="236.55555492181674"/>
        <omgdi:waypoint x="1110.0" y="236.55555492181674"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-7172DFFF-DF18-45D9-9179-762AF16B2EE0"
                       id="BPMNEdge_sid-7172DFFF-DF18-45D9-9179-762AF16B2EE0">
        <omgdi:waypoint x="207.6636741093123" y="216.6696481200193"/>
        <omgdi:waypoint x="207.0" y="101.0"/>
        <omgdi:waypoint x="620.0" y="101.0"/>
        <omgdi:waypoint x="620.0" y="196.55555492181674"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-D4861E45-774A-434E-B6A6-F86F9BDCB538"
                       id="BPMNEdge_sid-D4861E45-774A-434E-B6A6-F86F9BDCB538">
        <omgdi:waypoint x="414.99999999999994" y="236.5555517056495"/>
        <omgdi:waypoint x="465.00000091890485" y="236.5555540029118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-7E9E287C-76F3-4DF5-B8CC-7A7B61B9EED9"
                       id="BPMNEdge_sid-7E9E287C-76F3-4DF5-B8CC-7A7B61B9EED9">
        <omgdi:waypoint x="925.0" y="370.0"/>
        <omgdi:waypoint x="1010.0" y="370.0"/>
        <omgdi:waypoint x="1010.0" y="276.55555492181674"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-C26B4702-4693-4B44-A558-E70C2B4C91DB"
                       id="BPMNEdge_sid-C26B4702-4693-4B44-A558-E70C2B4C91DB">
        <omgdi:waypoint x="925.0" y="100.0"/>
        <omgdi:waypoint x="1010.0" y="100.0"/>
        <omgdi:waypoint x="1010.0" y="196.55555492181674"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-8628F8A5-628A-4189-AD00-81856C7121D7"
                       id="BPMNEdge_sid-8628F8A5-628A-4189-AD00-81856C7121D7">
        <omgdi:waypoint x="485.0" y="216.5555549218167"/>
        <omgdi:waypoint x="485.0" y="80.0"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-F31A9A58-6527-4BA0-89C9-02948A4781C6"
                       id="BPMNEdge_sid-F31A9A58-6527-4BA0-89C9-02948A4781C6">
        <omgdi:waypoint x="227.7777728209444" y="236.5555494083872"/>
        <omgdi:waypoint x="315.0" y="236.5555494083872"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-589996B0-48BA-496B-86F9-576736E2B4BC"
                       id="BPMNEdge_sid-589996B0-48BA-496B-86F9-576736E2B4BC">
        <omgdi:waypoint x="820.0" y="236.55555492181674"/>
        <omgdi:waypoint x="855.0" y="236.55555492181674"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-5DD24A07-7E39-4E03-B86D-D129887AC1C7"
                       id="BPMNEdge_sid-5DD24A07-7E39-4E03-B86D-D129887AC1C7">
        <omgdi:waypoint x="505.0" y="236.55555492181668"/>
        <omgdi:waypoint x="570.0" y="236.55555492181674"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="sid-F2279020-8DCE-48AE-81A1-24FA512C9909"
                       id="BPMNEdge_sid-F2279020-8DCE-48AE-81A1-24FA512C9909">
        <omgdi:waypoint x="48.51851818806295" y="236.5555544472282"/>
        <omgdi:waypoint x="187.77777345372908" y="236.5555500411719"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</definitions>
